<?xml version="1.0" encoding="UTF-8"?>

<!--
  ** This file was automatically generated by 
  ** EJBGen WebLogic Server 10.0 SP0  Mon Mar 26 02:02:31 BST 2007 914577 
-->
<weblogic-rdbms-jar
  xmlns="http://www.bea.com/ns/weblogic/90"
  xmlns:j2ee="http://java.sun.com/xml/ns/j2ee"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="http://www.bea.com/ns/weblogic/90 http://www.bea.com/ns/weblogic/90/weblogic-rdbms20-persistence.xsd">
  <weblogic-rdbms-bean>
    <ejb-name>VitalSignsEJB</ejb-name>
    <data-source-jndi-name>jdbc/MedRecTxDataSource</data-source-jndi-name>
    <table-map>
      <table-name>vital_signs</table-name>
      <field-map>
        <cmp-field>id</cmp-field>
        <dbms-column>id</dbms-column>
      </field-map>
      <field-map>
        <cmp-field>temperature</cmp-field>
        <dbms-column>temperature</dbms-column>
      </field-map>
      <field-map>
        <cmp-field>bloodPressure</cmp-field>
        <dbms-column>blood_pressure</dbms-column>
      </field-map>
      <field-map>
        <cmp-field>pulse</cmp-field>
        <dbms-column>pulse</dbms-column>
      </field-map>
      <field-map>
        <cmp-field>weight</cmp-field>
        <dbms-column>weight</dbms-column>
      </field-map>
      <field-map>
        <cmp-field>height</cmp-field>
        <dbms-column>height</dbms-column>
      </field-map>
    </table-map>
    <field-group>
      <group-name>vitalSigns-group</group-name>
      <cmp-field>temperature</cmp-field>
      <cmp-field>bloodPressure</cmp-field>
      <cmp-field>pulse</cmp-field>
      <cmp-field>weight</cmp-field>
      <cmp-field>height</cmp-field>
    </field-group>
    <delay-database-insert-until>ejbPostCreate</delay-database-insert-until>
    <automatic-key-generation>
      <generator-type>SequenceTable</generator-type>
      <generator-name>VITAL_SIGNS_SEQ</generator-name>
      <key-cache-size>10</key-cache-size>
    </automatic-key-generation>
  </weblogic-rdbms-bean>
  <weblogic-rdbms-bean>
    <ejb-name>UserEJB</ejb-name>
    <data-source-jndi-name>jdbc/MedRecTxDataSource</data-source-jndi-name>
    <table-map>
      <table-name>medrec_user</table-name>
      <field-map>
        <cmp-field>username</cmp-field>
        <dbms-column>username</dbms-column>
      </field-map>
      <field-map>
        <cmp-field>password</cmp-field>
        <dbms-column>password</dbms-column>
      </field-map>
      <field-map>
        <cmp-field>status</cmp-field>
        <dbms-column>status</dbms-column>
      </field-map>
    </table-map>
    <delay-database-insert-until>ejbPostCreate</delay-database-insert-until>
  </weblogic-rdbms-bean>
  <weblogic-rdbms-bean>
    <ejb-name>RecordEJB</ejb-name>
    <data-source-jndi-name>jdbc/MedRecTxDataSource</data-source-jndi-name>
    <table-map>
      <table-name>record</table-name>
      <field-map>
        <cmp-field>id</cmp-field>
        <dbms-column>id</dbms-column>
      </field-map>
      <field-map>
        <cmp-field>patientId</cmp-field>
        <dbms-column>pat_id</dbms-column>
      </field-map>
      <field-map>
        <cmp-field>physicianId</cmp-field>
        <dbms-column>phys_id</dbms-column>
      </field-map>
      <field-map>
        <cmp-field>date</cmp-field>
        <dbms-column>record_date</dbms-column>
      </field-map>
      <field-map>
        <cmp-field>symptoms</cmp-field>
        <dbms-column>symptoms</dbms-column>
      </field-map>
      <field-map>
        <cmp-field>diagnosis</cmp-field>
        <dbms-column>diagnosis</dbms-column>
      </field-map>
      <field-map>
        <cmp-field>notes</cmp-field>
        <dbms-column>notes</dbms-column>
      </field-map>
      <field-map>
        <cmp-field>vitalSignsId</cmp-field>
        <dbms-column>vital_id</dbms-column>
      </field-map>
    </table-map>
    <field-group>
      <group-name>liteWeight</group-name>
      <cmr-field>physician</cmr-field>
      <cmp-field>patientId</cmp-field>
      <cmp-field>date</cmp-field>
      <cmp-field>symptoms</cmp-field>
    </field-group>
    <relationship-caching>
      <caching-name>recordSummaryCache</caching-name>
      <caching-element>
        <cmr-field>physician</cmr-field>
        <group-name>physician-group</group-name>
      </caching-element>
    </relationship-caching>
    <relationship-caching>
      <caching-name>recordCache</caching-name>
      <caching-element>
        <cmr-field>vitalSigns</cmr-field>
        <group-name>vitalSigns-group</group-name>
      </caching-element>
      <caching-element>
        <cmr-field>prescriptions</cmr-field>
        <group-name>prescriptions-group</group-name>
      </caching-element>
    </relationship-caching>
    <weblogic-query>
      <query-method>
        <method-name>findByPatientId</method-name>
        <method-params>
          <method-param>java.lang.Integer</method-param>
        </method-params>
      </query-method>
      <ejb-ql-query>
        <weblogic-ql>
          <![CDATA[SELECT OBJECT(o) FROM RecordEJB AS o WHERE o.patientId = ?1 ORDERBY o.date]]>
        </weblogic-ql>
        <group-name>liteWeight</group-name>
        <caching-name>recordSummaryCache</caching-name>
      </ejb-ql-query>
    </weblogic-query>
    <weblogic-query>
      <query-method>
        <method-name>findByRecordId</method-name>
        <method-params>
          <method-param>java.lang.Integer</method-param>
        </method-params>
      </query-method>
      <ejb-ql-query>
        <weblogic-ql>
          <![CDATA[SELECT OBJECT(o) FROM RecordEJB AS o WHERE o.id = ?1]]>
        </weblogic-ql>
        <caching-name>recordCache</caching-name>
      </ejb-ql-query>
    </weblogic-query>
    <delay-database-insert-until>ejbPostCreate</delay-database-insert-until>
    <automatic-key-generation>
      <generator-type>SequenceTable</generator-type>
      <generator-name>RECORD_SEQ</generator-name>
      <key-cache-size>10</key-cache-size>
    </automatic-key-generation>
  </weblogic-rdbms-bean>
  <weblogic-rdbms-bean>
    <ejb-name>PatientEJB</ejb-name>
    <data-source-jndi-name>jdbc/MedRecTxDataSource</data-source-jndi-name>
    <table-map>
      <table-name>patient</table-name>
      <field-map>
        <cmp-field>id</cmp-field>
        <dbms-column>id</dbms-column>
      </field-map>
      <field-map>
        <cmp-field>firstName</cmp-field>
        <dbms-column>first_name</dbms-column>
      </field-map>
      <field-map>
        <cmp-field>middleName</cmp-field>
        <dbms-column>middle_name</dbms-column>
      </field-map>
      <field-map>
        <cmp-field>lastName</cmp-field>
        <dbms-column>last_name</dbms-column>
      </field-map>
      <field-map>
        <cmp-field>dateOfBirth</cmp-field>
        <dbms-column>dob</dbms-column>
      </field-map>
      <field-map>
        <cmp-field>gender</cmp-field>
        <dbms-column>gender</dbms-column>
      </field-map>
      <field-map>
        <cmp-field>ssn</cmp-field>
        <dbms-column>ssn</dbms-column>
      </field-map>
      <field-map>
        <cmp-field>phone</cmp-field>
        <dbms-column>phone</dbms-column>
      </field-map>
      <field-map>
        <cmp-field>email</cmp-field>
        <dbms-column>email</dbms-column>
      </field-map>
      <field-map>
        <cmp-field>addressId</cmp-field>
        <dbms-column>address_id</dbms-column>
      </field-map>
    </table-map>
    <field-group>
      <group-name>liteWeight</group-name>
      <cmp-field>id</cmp-field>
      <cmp-field>firstName</cmp-field>
      <cmp-field>middleName</cmp-field>
      <cmp-field>lastName</cmp-field>
      <cmp-field>dateOfBirth</cmp-field>
    </field-group>
    <relationship-caching>
      <caching-name>addressCache</caching-name>
      <caching-element>
        <cmr-field>address</cmr-field>
        <group-name>address-group</group-name>
      </caching-element>
    </relationship-caching>
    <weblogic-query>
      <query-method>
        <method-name>findByEmail</method-name>
        <method-params>
          <method-param>java.lang.String</method-param>
        </method-params>
      </query-method>
      <ejb-ql-query>
        <weblogic-ql>
          <![CDATA[SELECT OBJECT(o) FROM PatientEJB AS o WHERE UPPER(o.email) = UPPER(?1)]]>
        </weblogic-ql>
        <caching-name>addressCache</caching-name>
      </ejb-ql-query>
    </weblogic-query>
    <weblogic-query>
      <query-method>
        <method-name>findBySsn</method-name>
        <method-params>
          <method-param>java.lang.String</method-param>
        </method-params>
      </query-method>
      <ejb-ql-query>
        <group-name>liteWeight</group-name>
      </ejb-ql-query>
    </weblogic-query>
    <weblogic-query>
      <query-method>
        <method-name>findByLastNameWild</method-name>
        <method-params>
          <method-param>java.lang.String</method-param>
        </method-params>
      </query-method>
      <ejb-ql-query>
        <weblogic-ql>
          <![CDATA[SELECT OBJECT(o) FROM PatientEJB AS o WHERE UPPER(o.lastName) like UPPER(?1) ORDERBY o.lastName]]>
        </weblogic-ql>
        <caching-name>addressCache</caching-name>
      </ejb-ql-query>
    </weblogic-query>
    <weblogic-query>
      <query-method>
        <method-name>findByPatientIdLite</method-name>
        <method-params>
          <method-param>java.lang.Integer</method-param>
        </method-params>
      </query-method>
      <ejb-ql-query>
        <group-name>liteWeight</group-name>
      </ejb-ql-query>
    </weblogic-query>
    <delay-database-insert-until>ejbPostCreate</delay-database-insert-until>
    <automatic-key-generation>
      <generator-type>SequenceTable</generator-type>
      <generator-name>PATIENT_SEQ</generator-name>
      <key-cache-size>10</key-cache-size>
    </automatic-key-generation>
  </weblogic-rdbms-bean>
  <weblogic-rdbms-bean>
    <ejb-name>GroupEJB</ejb-name>
    <data-source-jndi-name>jdbc/MedRecTxDataSource</data-source-jndi-name>
    <table-map>
      <table-name>groups</table-name>
      <field-map>
        <cmp-field>groupname</cmp-field>
        <dbms-column>group_name</dbms-column>
      </field-map>
      <field-map>
        <cmp-field>username</cmp-field>
        <dbms-column>username</dbms-column>
      </field-map>
    </table-map>
    <delay-database-insert-until>ejbPostCreate</delay-database-insert-until>
  </weblogic-rdbms-bean>
  <weblogic-rdbms-bean>
    <ejb-name>PhysicianEJB</ejb-name>
    <data-source-jndi-name>jdbc/MedRecTxDataSource</data-source-jndi-name>
    <table-map>
      <table-name>physician</table-name>
      <field-map>
        <cmp-field>id</cmp-field>
        <dbms-column>id</dbms-column>
      </field-map>
      <field-map>
        <cmp-field>firstName</cmp-field>
        <dbms-column>first_name</dbms-column>
      </field-map>
      <field-map>
        <cmp-field>middleName</cmp-field>
        <dbms-column>middle_name</dbms-column>
      </field-map>
      <field-map>
        <cmp-field>lastName</cmp-field>
        <dbms-column>last_name</dbms-column>
      </field-map>
      <field-map>
        <cmp-field>phone</cmp-field>
        <dbms-column>phone</dbms-column>
      </field-map>
      <field-map>
        <cmp-field>email</cmp-field>
        <dbms-column>email</dbms-column>
      </field-map>
    </table-map>
    <field-group>
      <group-name>physician-group</group-name>
      <cmp-field>firstName</cmp-field>
      <cmp-field>middleName</cmp-field>
      <cmp-field>lastName</cmp-field>
    </field-group>
    <weblogic-query>
      <query-method>
        <method-name>findByFirstLastName</method-name>
        <method-params>
          <method-param>java.lang.String</method-param>
          <method-param>java.lang.String</method-param>
        </method-params>
      </query-method>
      <ejb-ql-query>
      </ejb-ql-query>
      <include-updates>false</include-updates>
    </weblogic-query>
    <delay-database-insert-until>ejbPostCreate</delay-database-insert-until>
    <automatic-key-generation>
      <generator-type>SequenceTable</generator-type>
      <generator-name>PHYSICIAN_SEQ</generator-name>
      <key-cache-size>10</key-cache-size>
    </automatic-key-generation>
  </weblogic-rdbms-bean>
  <weblogic-rdbms-bean>
    <ejb-name>AddressEJB</ejb-name>
    <data-source-jndi-name>jdbc/MedRecTxDataSource</data-source-jndi-name>
    <table-map>
      <table-name>address</table-name>
      <field-map>
        <cmp-field>id</cmp-field>
        <dbms-column>id</dbms-column>
      </field-map>
      <field-map>
        <cmp-field>streetName1</cmp-field>
        <dbms-column>street1</dbms-column>
      </field-map>
      <field-map>
        <cmp-field>streetName2</cmp-field>
        <dbms-column>street2</dbms-column>
      </field-map>
      <field-map>
        <cmp-field>city</cmp-field>
        <dbms-column>city</dbms-column>
      </field-map>
      <field-map>
        <cmp-field>state</cmp-field>
        <dbms-column>state</dbms-column>
      </field-map>
      <field-map>
        <cmp-field>zipCode</cmp-field>
        <dbms-column>zip</dbms-column>
      </field-map>
      <field-map>
        <cmp-field>country</cmp-field>
        <dbms-column>country</dbms-column>
      </field-map>
    </table-map>
    <field-group>
      <group-name>address-group</group-name>
      <cmp-field>streetName1</cmp-field>
      <cmp-field>streetName2</cmp-field>
      <cmp-field>city</cmp-field>
      <cmp-field>state</cmp-field>
      <cmp-field>zipCode</cmp-field>
      <cmp-field>country</cmp-field>
    </field-group>
    <delay-database-insert-until>ejbPostCreate</delay-database-insert-until>
    <automatic-key-generation>
      <generator-type>SequenceTable</generator-type>
      <generator-name>ADDRESS_SEQ</generator-name>
      <key-cache-size>10</key-cache-size>
    </automatic-key-generation>
  </weblogic-rdbms-bean>
  <weblogic-rdbms-bean>
    <ejb-name>PrescriptionEJB</ejb-name>
    <data-source-jndi-name>jdbc/MedRecTxDataSource</data-source-jndi-name>
    <table-map>
      <table-name>prescription</table-name>
      <field-map>
        <cmp-field>id</cmp-field>
        <dbms-column>id</dbms-column>
      </field-map>
      <field-map>
        <cmp-field>patientId</cmp-field>
        <dbms-column>pat_id</dbms-column>
      </field-map>
      <field-map>
        <cmp-field>recordId</cmp-field>
        <dbms-column>record_id</dbms-column>
      </field-map>
      <field-map>
        <cmp-field>datePrescribed</cmp-field>
        <dbms-column>date_prescribed</dbms-column>
      </field-map>
      <field-map>
        <cmp-field>drug</cmp-field>
        <dbms-column>drug</dbms-column>
      </field-map>
      <field-map>
        <cmp-field>dosage</cmp-field>
        <dbms-column>dosage</dbms-column>
      </field-map>
      <field-map>
        <cmp-field>frequency</cmp-field>
        <dbms-column>frequency</dbms-column>
      </field-map>
      <field-map>
        <cmp-field>refillsRemaining</cmp-field>
        <dbms-column>refills_remaining</dbms-column>
      </field-map>
      <field-map>
        <cmp-field>instructions</cmp-field>
        <dbms-column>instructions</dbms-column>
      </field-map>
    </table-map>
    <field-group>
      <group-name>liteWeight</group-name>
      <cmp-field>datePrescribed</cmp-field>
      <cmp-field>drug</cmp-field>
      <cmp-field>dosage</cmp-field>
      <cmp-field>frequency</cmp-field>
      <cmp-field>refillsRemaining</cmp-field>
      <cmp-field>instructions</cmp-field>
    </field-group>
    <field-group>
      <group-name>prescriptions-group</group-name>
      <cmp-field>datePrescribed</cmp-field>
      <cmp-field>drug</cmp-field>
      <cmp-field>dosage</cmp-field>
      <cmp-field>frequency</cmp-field>
      <cmp-field>refillsRemaining</cmp-field>
      <cmp-field>instructions</cmp-field>
    </field-group>
    <weblogic-query>
      <query-method>
        <method-name>findByPatientId</method-name>
        <method-params>
          <method-param>java.lang.Integer</method-param>
        </method-params>
      </query-method>
      <ejb-ql-query>
        <group-name>liteWeight</group-name>
      </ejb-ql-query>
    </weblogic-query>
    <delay-database-insert-until>ejbPostCreate</delay-database-insert-until>
    <automatic-key-generation>
      <generator-type>SequenceTable</generator-type>
      <generator-name>PRESCRIPTION_SEQ</generator-name>
      <key-cache-size>10</key-cache-size>
    </automatic-key-generation>
  </weblogic-rdbms-bean>
  <weblogic-rdbms-relation>
    <relation-name>Record-VitalSigns</relation-name>
    <weblogic-relationship-role>
      <relationship-role-name>Record-Has-VitalSigns</relationship-role-name>
      <relationship-role-map>
        <column-map>
          <foreign-key-column>vital_id</foreign-key-column>
          <key-column>id</key-column>
        </column-map>
      </relationship-role-map>
    </weblogic-relationship-role>
  </weblogic-rdbms-relation>
  <weblogic-rdbms-relation>
    <relation-name>User-Patient</relation-name>
    <weblogic-relationship-role>
      <relationship-role-name>Patient-Has-User</relationship-role-name>
      <relationship-role-map>
        <column-map>
          <foreign-key-column>email</foreign-key-column>
          <key-column>username</key-column>
        </column-map>
      </relationship-role-map>
    </weblogic-relationship-role>
  </weblogic-rdbms-relation>
  <weblogic-rdbms-relation>
    <relation-name>Record-Prescriptions</relation-name>
    <weblogic-relationship-role>
      <relationship-role-name>Prescriptions-Has-Record</relationship-role-name>
      <relationship-role-map>
        <column-map>
          <foreign-key-column>record_id</foreign-key-column>
          <key-column>id</key-column>
        </column-map>
      </relationship-role-map>
    </weblogic-relationship-role>
  </weblogic-rdbms-relation>
  <weblogic-rdbms-relation>
    <relation-name>Record-Physician</relation-name>
    <weblogic-relationship-role>
      <relationship-role-name>Record-Has-Physician</relationship-role-name>
      <relationship-role-map>
        <column-map>
          <foreign-key-column>phys_id</foreign-key-column>
          <key-column>id</key-column>
        </column-map>
      </relationship-role-map>
    </weblogic-relationship-role>
  </weblogic-rdbms-relation>
  <weblogic-rdbms-relation>
    <relation-name>Patient-Address</relation-name>
    <weblogic-relationship-role>
      <relationship-role-name>Patient-Has-Addresses</relationship-role-name>
      <relationship-role-map>
        <column-map>
          <foreign-key-column>address_id</foreign-key-column>
          <key-column>id</key-column>
        </column-map>
      </relationship-role-map>
    </weblogic-relationship-role>
  </weblogic-rdbms-relation>
  <create-default-dbms-tables>Disabled</create-default-dbms-tables>
  <database-type>Pointbase</database-type>
</weblogic-rdbms-jar>
