<?xml version="1.0" encoding="UTF-8"?>

<!--
  ** This file was automatically generated by 
  ** EJBGen WebLogic Server 10.0 SP0  Mon Mar 26 02:02:31 BST 2007 914577 
-->
<ejb-jar
  xmlns="http://java.sun.com/xml/ns/j2ee"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="http://java.sun.com/xml/ns/j2ee http://java.sun.com/xml/ns/j2ee/ejb-jar_2_1.xsd"
  version="2.1">
  <enterprise-beans>
    <entity>
      <ejb-name>VitalSignsEJB</ejb-name>
      <local-home>com.bea.medrec.entities.VitalSignsLocalHome</local-home>
      <local>com.bea.medrec.entities.VitalSignsLocal</local>
      <ejb-class>com.bea.medrec.entities.VitalSignsEJB</ejb-class>
      <persistence-type>Container</persistence-type>
      <prim-key-class>java.lang.Integer</prim-key-class>
      <reentrant>false</reentrant>
      <cmp-version>2.x</cmp-version>
      <abstract-schema-name>VitalSignsEJB</abstract-schema-name>
      <cmp-field>
        <field-name>id</field-name>
      </cmp-field>
      <cmp-field>
        <field-name>temperature</field-name>
      </cmp-field>
      <cmp-field>
        <field-name>bloodPressure</field-name>
      </cmp-field>
      <cmp-field>
        <field-name>pulse</field-name>
      </cmp-field>
      <cmp-field>
        <field-name>weight</field-name>
      </cmp-field>
      <cmp-field>
        <field-name>height</field-name>
      </cmp-field>
      <primkey-field>id</primkey-field>
    </entity>
    <entity>
      <ejb-name>UserEJB</ejb-name>
      <local-home>com.bea.medrec.entities.UserLocalHome</local-home>
      <local>com.bea.medrec.entities.UserLocal</local>
      <ejb-class>com.bea.medrec.entities.UserEJB</ejb-class>
      <persistence-type>Container</persistence-type>
      <prim-key-class>java.lang.String</prim-key-class>
      <reentrant>false</reentrant>
      <cmp-version>2.x</cmp-version>
      <abstract-schema-name>UserEJB</abstract-schema-name>
      <cmp-field>
        <field-name>username</field-name>
      </cmp-field>
      <cmp-field>
        <field-name>password</field-name>
      </cmp-field>
      <cmp-field>
        <field-name>status</field-name>
      </cmp-field>
      <primkey-field>username</primkey-field>
      <ejb-local-ref>
        <ejb-ref-name>ejb/local/patient</ejb-ref-name>
        <ejb-ref-type>Entity</ejb-ref-type>
        <local-home>com.bea.medrec.entities.PatientLocalHome</local-home>
        <local>com.bea.medrec.entities.PatientLocal</local>
        <ejb-link>PatientEJB</ejb-link>
      </ejb-local-ref>
      <query>
        <query-method>
          <method-name>findByUsername</method-name>
          <method-params>
            <method-param>java.lang.String</method-param>
          </method-params>
        </query-method>
        <ejb-ql>
          <![CDATA[SELECT OBJECT(o) FROM UserEJB AS o WHERE o.username = ?1]]>
        </ejb-ql>
      </query>
      <query>
        <query-method>
          <method-name>findByStatus</method-name>
          <method-params>
            <method-param>java.lang.String</method-param>
          </method-params>
        </query-method>
        <ejb-ql>
          <![CDATA[SELECT OBJECT(o) FROM UserEJB AS o WHERE o.status = ?1]]>
        </ejb-ql>
      </query>
    </entity>
    <entity>
      <ejb-name>RecordEJB</ejb-name>
      <local-home>com.bea.medrec.entities.RecordLocalHome</local-home>
      <local>com.bea.medrec.entities.RecordLocal</local>
      <ejb-class>com.bea.medrec.entities.RecordEJB</ejb-class>
      <persistence-type>Container</persistence-type>
      <prim-key-class>java.lang.Integer</prim-key-class>
      <reentrant>false</reentrant>
      <cmp-version>2.x</cmp-version>
      <abstract-schema-name>RecordEJB</abstract-schema-name>
      <cmp-field>
        <field-name>id</field-name>
      </cmp-field>
      <cmp-field>
        <field-name>patientId</field-name>
      </cmp-field>
      <cmp-field>
        <field-name>physicianId</field-name>
      </cmp-field>
      <cmp-field>
        <field-name>date</field-name>
      </cmp-field>
      <cmp-field>
        <field-name>symptoms</field-name>
      </cmp-field>
      <cmp-field>
        <field-name>diagnosis</field-name>
      </cmp-field>
      <cmp-field>
        <field-name>notes</field-name>
      </cmp-field>
      <cmp-field>
        <field-name>vitalSignsId</field-name>
      </cmp-field>
      <primkey-field>id</primkey-field>
      <ejb-local-ref>
        <ejb-ref-name>ejb/local/prescription</ejb-ref-name>
        <ejb-ref-type>Entity</ejb-ref-type>
        <local-home>com.bea.medrec.entities.PrescriptionLocalHome</local-home>
        <local>com.bea.medrec.entities.PrescriptionLocal</local>
        <ejb-link>PrescriptionEJB</ejb-link>
      </ejb-local-ref>
      <ejb-local-ref>
        <ejb-ref-name>ejb/local/vitalsigns</ejb-ref-name>
        <ejb-ref-type>Entity</ejb-ref-type>
        <local-home>com.bea.medrec.entities.VitalSignsLocalHome</local-home>
        <local>com.bea.medrec.entities.VitalSignsLocal</local>
        <ejb-link>VitalSignsEJB</ejb-link>
      </ejb-local-ref>
      <ejb-local-ref>
        <ejb-ref-name>ejb/local/physician</ejb-ref-name>
        <ejb-ref-type>Entity</ejb-ref-type>
        <local-home>com.bea.medrec.entities.PhysicianLocalHome</local-home>
        <local>com.bea.medrec.entities.PhysicianLocal</local>
        <ejb-link>PhysicianEJB</ejb-link>
      </ejb-local-ref>
      <query>
        <query-method>
          <method-name>findByPatientId</method-name>
          <method-params>
            <method-param>java.lang.Integer</method-param>
          </method-params>
        </query-method>
        <ejb-ql>
          <![CDATA[not used in favor of weblogic-ejb-ql for relationship caching]]>
        </ejb-ql>
      </query>
      <query>
        <query-method>
          <method-name>findByRecordId</method-name>
          <method-params>
            <method-param>java.lang.Integer</method-param>
          </method-params>
        </query-method>
        <ejb-ql>
          <![CDATA[not used in favor of weblogic-ejb-ql for relationship caching]]>
        </ejb-ql>
      </query>
    </entity>
    <entity>
      <ejb-name>PatientEJB</ejb-name>
      <local-home>com.bea.medrec.entities.PatientLocalHome</local-home>
      <local>com.bea.medrec.entities.PatientLocal</local>
      <ejb-class>com.bea.medrec.entities.PatientEJB</ejb-class>
      <persistence-type>Container</persistence-type>
      <prim-key-class>java.lang.Integer</prim-key-class>
      <reentrant>false</reentrant>
      <cmp-version>2.x</cmp-version>
      <abstract-schema-name>PatientEJB</abstract-schema-name>
      <cmp-field>
        <field-name>id</field-name>
      </cmp-field>
      <cmp-field>
        <field-name>firstName</field-name>
      </cmp-field>
      <cmp-field>
        <field-name>middleName</field-name>
      </cmp-field>
      <cmp-field>
        <field-name>lastName</field-name>
      </cmp-field>
      <cmp-field>
        <field-name>dateOfBirth</field-name>
      </cmp-field>
      <cmp-field>
        <field-name>gender</field-name>
      </cmp-field>
      <cmp-field>
        <field-name>ssn</field-name>
      </cmp-field>
      <cmp-field>
        <field-name>phone</field-name>
      </cmp-field>
      <cmp-field>
        <field-name>email</field-name>
      </cmp-field>
      <cmp-field>
        <field-name>addressId</field-name>
      </cmp-field>
      <primkey-field>id</primkey-field>
      <ejb-local-ref>
        <ejb-ref-name>ejb/local/address</ejb-ref-name>
        <ejb-ref-type>Entity</ejb-ref-type>
        <local-home>com.bea.medrec.entities.AddressLocalHome</local-home>
        <local>com.bea.medrec.entities.AddressLocal</local>
        <ejb-link>AddressEJB</ejb-link>
      </ejb-local-ref>
      <query>
        <query-method>
          <method-name>findByLastName</method-name>
          <method-params>
            <method-param>java.lang.String</method-param>
          </method-params>
        </query-method>
        <ejb-ql>
          <![CDATA[SELECT OBJECT(o) FROM PatientEJB AS o WHERE o.lastName = ?1]]>
        </ejb-ql>
      </query>
      <query>
        <query-method>
          <method-name>findByEmail</method-name>
          <method-params>
            <method-param>java.lang.String</method-param>
          </method-params>
        </query-method>
        <ejb-ql>
          <![CDATA[not used in favor of weblogic-ejb-ql for relationship caching]]>
        </ejb-ql>
      </query>
      <query>
        <query-method>
          <method-name>findBySsn</method-name>
          <method-params>
            <method-param>java.lang.String</method-param>
          </method-params>
        </query-method>
        <ejb-ql>
          <![CDATA[SELECT OBJECT(o) FROM PatientEJB AS o  WHERE o.ssn = ?1]]>
        </ejb-ql>
      </query>
      <query>
        <query-method>
          <method-name>findByLastNameDOB</method-name>
          <method-params>
            <method-param>java.lang.String</method-param>
            <method-param>java.sql.Date</method-param>
          </method-params>
        </query-method>
        <ejb-ql>
          <![CDATA[SELECT OBJECT(o) FROM PatientEJB AS o WHERE UPPER(o.lastName) = UPPER(?1) and o.dateOfBirth = ?2]]>
        </ejb-ql>
      </query>
      <query>
        <query-method>
          <method-name>findByLastNameFirstName</method-name>
          <method-params>
            <method-param>java.lang.String</method-param>
            <method-param>java.lang.String</method-param>
          </method-params>
        </query-method>
        <ejb-ql>
          <![CDATA[SELECT OBJECT(o) FROM PatientEJB AS o WHERE UPPER(o.lastName) = UPPER(?1) and UPPER(o.firstName) = UPPER(?2)]]>
        </ejb-ql>
      </query>
      <query>
        <query-method>
          <method-name>findPatientByStatus</method-name>
          <method-params>
            <method-param>java.lang.String</method-param>
          </method-params>
        </query-method>
        <ejb-ql>
          <![CDATA[SELECT OBJECT(o) FROM PatientEJB AS o, UserEJB AS u WHERE u.status = ?1]]>
        </ejb-ql>
      </query>
      <query>
        <query-method>
          <method-name>findByLastNameWild</method-name>
          <method-params>
            <method-param>java.lang.String</method-param>
          </method-params>
        </query-method>
        <ejb-ql>
          <![CDATA[not used in favor of weblogic-ejb-ql for relationship caching]]>
        </ejb-ql>
      </query>
      <query>
        <query-method>
          <method-name>findByPatientIdLite</method-name>
          <method-params>
            <method-param>java.lang.Integer</method-param>
          </method-params>
        </query-method>
        <ejb-ql>
          <![CDATA[SELECT OBJECT(o) FROM PatientEJB AS o WHERE o.id = ?1]]>
        </ejb-ql>
      </query>
    </entity>
    <entity>
      <ejb-name>GroupEJB</ejb-name>
      <local-home>com.bea.medrec.entities.GroupLocalHome</local-home>
      <local>com.bea.medrec.entities.GroupLocal</local>
      <ejb-class>com.bea.medrec.entities.GroupEJB</ejb-class>
      <persistence-type>Container</persistence-type>
      <prim-key-class>com.bea.medrec.entities.GroupCPK</prim-key-class>
      <reentrant>false</reentrant>
      <cmp-version>2.x</cmp-version>
      <abstract-schema-name>Mandatory</abstract-schema-name>
      <cmp-field>
        <field-name>groupname</field-name>
      </cmp-field>
      <cmp-field>
        <field-name>username</field-name>
      </cmp-field>
    </entity>
    <entity>
      <ejb-name>PhysicianEJB</ejb-name>
      <local-home>com.bea.medrec.entities.PhysicianLocalHome</local-home>
      <local>com.bea.medrec.entities.PhysicianLocal</local>
      <ejb-class>com.bea.medrec.entities.PhysicianEJB</ejb-class>
      <persistence-type>Container</persistence-type>
      <prim-key-class>java.lang.Integer</prim-key-class>
      <reentrant>false</reentrant>
      <cmp-version>2.x</cmp-version>
      <abstract-schema-name>PhysicianEJB</abstract-schema-name>
      <cmp-field>
        <field-name>id</field-name>
      </cmp-field>
      <cmp-field>
        <field-name>firstName</field-name>
      </cmp-field>
      <cmp-field>
        <field-name>middleName</field-name>
      </cmp-field>
      <cmp-field>
        <field-name>lastName</field-name>
      </cmp-field>
      <cmp-field>
        <field-name>phone</field-name>
      </cmp-field>
      <cmp-field>
        <field-name>email</field-name>
      </cmp-field>
      <primkey-field>id</primkey-field>
      <query>
        <query-method>
          <method-name>findByLastName</method-name>
          <method-params>
            <method-param>java.lang.String</method-param>
          </method-params>
        </query-method>
        <ejb-ql>
          <![CDATA[SELECT OBJECT(o) FROM PhysicianEJB AS o WHERE o.lastName = ?1]]>
        </ejb-ql>
      </query>
      <query>
        <query-method>
          <method-name>findByFirstLastName</method-name>
          <method-params>
            <method-param>java.lang.String</method-param>
            <method-param>java.lang.String</method-param>
          </method-params>
        </query-method>
        <ejb-ql>
          <![CDATA[SELECT OBJECT(o) FROM PhysicianEJB AS o WHERE o.firstName = ?1 and o.lastName = ?2]]>
        </ejb-ql>
      </query>
    </entity>
    <entity>
      <ejb-name>AddressEJB</ejb-name>
      <local-home>com.bea.medrec.entities.AddressLocalHome</local-home>
      <local>com.bea.medrec.entities.AddressLocal</local>
      <ejb-class>com.bea.medrec.entities.AddressEJB</ejb-class>
      <persistence-type>Container</persistence-type>
      <prim-key-class>java.lang.Integer</prim-key-class>
      <reentrant>false</reentrant>
      <cmp-version>2.x</cmp-version>
      <abstract-schema-name>AddressEJB</abstract-schema-name>
      <cmp-field>
        <field-name>id</field-name>
      </cmp-field>
      <cmp-field>
        <field-name>streetName1</field-name>
      </cmp-field>
      <cmp-field>
        <field-name>streetName2</field-name>
      </cmp-field>
      <cmp-field>
        <field-name>city</field-name>
      </cmp-field>
      <cmp-field>
        <field-name>state</field-name>
      </cmp-field>
      <cmp-field>
        <field-name>zipCode</field-name>
      </cmp-field>
      <cmp-field>
        <field-name>country</field-name>
      </cmp-field>
      <primkey-field>id</primkey-field>
    </entity>
    <entity>
      <ejb-name>PrescriptionEJB</ejb-name>
      <local-home>com.bea.medrec.entities.PrescriptionLocalHome</local-home>
      <local>com.bea.medrec.entities.PrescriptionLocal</local>
      <ejb-class>com.bea.medrec.entities.PrescriptionEJB</ejb-class>
      <persistence-type>Container</persistence-type>
      <prim-key-class>java.lang.Integer</prim-key-class>
      <reentrant>false</reentrant>
      <cmp-version>2.x</cmp-version>
      <abstract-schema-name>PrescriptionEJB</abstract-schema-name>
      <cmp-field>
        <field-name>id</field-name>
      </cmp-field>
      <cmp-field>
        <field-name>patientId</field-name>
      </cmp-field>
      <cmp-field>
        <field-name>recordId</field-name>
      </cmp-field>
      <cmp-field>
        <field-name>datePrescribed</field-name>
      </cmp-field>
      <cmp-field>
        <field-name>drug</field-name>
      </cmp-field>
      <cmp-field>
        <field-name>dosage</field-name>
      </cmp-field>
      <cmp-field>
        <field-name>frequency</field-name>
      </cmp-field>
      <cmp-field>
        <field-name>refillsRemaining</field-name>
      </cmp-field>
      <cmp-field>
        <field-name>instructions</field-name>
      </cmp-field>
      <primkey-field>id</primkey-field>
      <query>
        <query-method>
          <method-name>findByPatientId</method-name>
          <method-params>
            <method-param>java.lang.Integer</method-param>
          </method-params>
        </query-method>
        <ejb-ql>
          <![CDATA[SELECT OBJECT(o) FROM PrescriptionEJB AS o WHERE o.patientId = ?1 ORDERBY o.datePrescribed]]>
        </ejb-ql>
      </query>
    </entity>
  </enterprise-beans>
  <relationships>
    <ejb-relation>
      <ejb-relation-name>Record-VitalSigns</ejb-relation-name>
      <ejb-relationship-role>
        <ejb-relationship-role-name>VitalSigns-Has-Record</ejb-relationship-role-name>
        <multiplicity>One</multiplicity>
        <relationship-role-source>
          <ejb-name>VitalSignsEJB</ejb-name>
        </relationship-role-source>
      </ejb-relationship-role>
      <ejb-relationship-role>
        <ejb-relationship-role-name>Record-Has-VitalSigns</ejb-relationship-role-name>
        <multiplicity>One</multiplicity>
        <cascade-delete/>
        <relationship-role-source>
          <ejb-name>RecordEJB</ejb-name>
        </relationship-role-source>
        <cmr-field>
          <cmr-field-name>vitalSigns</cmr-field-name>
        </cmr-field>
      </ejb-relationship-role>
    </ejb-relation>
    <ejb-relation>
      <ejb-relation-name>User-Patient</ejb-relation-name>
      <ejb-relationship-role>
        <ejb-relationship-role-name>User-Has-Patient</ejb-relationship-role-name>
        <multiplicity>One</multiplicity>
        <relationship-role-source>
          <ejb-name>UserEJB</ejb-name>
        </relationship-role-source>
        <cmr-field>
          <cmr-field-name>patient</cmr-field-name>
        </cmr-field>
      </ejb-relationship-role>
      <ejb-relationship-role>
        <ejb-relationship-role-name>Patient-Has-User</ejb-relationship-role-name>
        <multiplicity>One</multiplicity>
        <cascade-delete/>
        <relationship-role-source>
          <ejb-name>PatientEJB</ejb-name>
        </relationship-role-source>
        <cmr-field>
          <cmr-field-name>user</cmr-field-name>
        </cmr-field>
      </ejb-relationship-role>
    </ejb-relation>
    <ejb-relation>
      <ejb-relation-name>Record-Prescriptions</ejb-relation-name>
      <ejb-relationship-role>
        <ejb-relationship-role-name>Record-Has-Prescriptions</ejb-relationship-role-name>
        <multiplicity>One</multiplicity>
        <relationship-role-source>
          <ejb-name>RecordEJB</ejb-name>
        </relationship-role-source>
        <cmr-field>
          <cmr-field-name>prescriptions</cmr-field-name>
          <cmr-field-type>java.util.Collection</cmr-field-type>
        </cmr-field>
      </ejb-relationship-role>
      <ejb-relationship-role>
        <ejb-relationship-role-name>Prescriptions-Has-Record</ejb-relationship-role-name>
        <multiplicity>Many</multiplicity>
        <relationship-role-source>
          <ejb-name>PrescriptionEJB</ejb-name>
        </relationship-role-source>
        <cmr-field>
          <cmr-field-name>record</cmr-field-name>
        </cmr-field>
      </ejb-relationship-role>
    </ejb-relation>
    <ejb-relation>
      <ejb-relation-name>Record-Physician</ejb-relation-name>
      <ejb-relationship-role>
        <ejb-relationship-role-name>Record-Has-Physician</ejb-relationship-role-name>
        <multiplicity>Many</multiplicity>
        <relationship-role-source>
          <ejb-name>RecordEJB</ejb-name>
        </relationship-role-source>
        <cmr-field>
          <cmr-field-name>physician</cmr-field-name>
        </cmr-field>
      </ejb-relationship-role>
      <ejb-relationship-role>
        <ejb-relationship-role-name>Physician-Has-Records</ejb-relationship-role-name>
        <multiplicity>One</multiplicity>
        <relationship-role-source>
          <ejb-name>PhysicianEJB</ejb-name>
        </relationship-role-source>
        <cmr-field>
          <cmr-field-name>records</cmr-field-name>
          <cmr-field-type>java.util.Collection</cmr-field-type>
        </cmr-field>
      </ejb-relationship-role>
    </ejb-relation>
    <ejb-relation>
      <ejb-relation-name>Patient-Address</ejb-relation-name>
      <ejb-relationship-role>
        <ejb-relationship-role-name>Patient-Has-Addresses</ejb-relationship-role-name>
        <multiplicity>Many</multiplicity>
        <relationship-role-source>
          <ejb-name>PatientEJB</ejb-name>
        </relationship-role-source>
        <cmr-field>
          <cmr-field-name>address</cmr-field-name>
        </cmr-field>
      </ejb-relationship-role>
      <ejb-relationship-role>
        <ejb-relationship-role-name>Address-Has-Patient</ejb-relationship-role-name>
        <multiplicity>One</multiplicity>
        <relationship-role-source>
          <ejb-name>AddressEJB</ejb-name>
        </relationship-role-source>
      </ejb-relationship-role>
    </ejb-relation>
  </relationships>
  <assembly-descriptor>
    <container-transaction>
      <method>
        <ejb-name>GroupEJB</ejb-name>
        <method-name>*</method-name>
      </method>
      <trans-attribute>Required</trans-attribute>
    </container-transaction>
    <container-transaction>
      <method>
        <ejb-name>VitalSignsEJB</ejb-name>
        <method-name>*</method-name>
      </method>
      <trans-attribute>Mandatory</trans-attribute>
    </container-transaction>
    <container-transaction>
      <method>
        <ejb-name>AddressEJB</ejb-name>
        <method-name>*</method-name>
      </method>
      <trans-attribute>Mandatory</trans-attribute>
    </container-transaction>
    <container-transaction>
      <method>
        <ejb-name>UserEJB</ejb-name>
        <method-name>*</method-name>
      </method>
      <trans-attribute>Mandatory</trans-attribute>
    </container-transaction>
    <container-transaction>
      <method>
        <ejb-name>PhysicianEJB</ejb-name>
        <method-name>*</method-name>
      </method>
      <trans-attribute>Mandatory</trans-attribute>
    </container-transaction>
    <container-transaction>
      <method>
        <ejb-name>PatientEJB</ejb-name>
        <method-name>*</method-name>
      </method>
      <trans-attribute>Mandatory</trans-attribute>
    </container-transaction>
    <container-transaction>
      <method>
        <ejb-name>RecordEJB</ejb-name>
        <method-name>*</method-name>
      </method>
      <trans-attribute>Mandatory</trans-attribute>
    </container-transaction>
    <container-transaction>
      <method>
        <ejb-name>PrescriptionEJB</ejb-name>
        <method-name>*</method-name>
      </method>
      <trans-attribute>Mandatory</trans-attribute>
    </container-transaction>
  </assembly-descriptor>
</ejb-jar>
